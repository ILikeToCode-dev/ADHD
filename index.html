<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ThinkSharp: ADHD Focus Quiz</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(2vh); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes slideIn {
      from { opacity: 0; transform: translateX(-2vw); }
      to { opacity: 1; transform: translateX(0); }
    }
    .fade-in { animation: fadeIn 0.5s ease-out; }
    .slide-in { animation: slideIn 0.5s ease-out; }
    .circle {
      transition: transform 0.2s ease, background-color 0.2s ease;
    }
    .circle:hover {
      transform: scale(1.1);
      cursor: pointer;
    }
    .task-item {
      transition: all 0.3s ease;
    }
    .task-item:hover {
      transform: translateX(0.5vw);
      background-color: #f3f4f6;
    }
    .loader-dot {
      animation: pulse 1.5s ease-in-out infinite;
      animation-delay: calc(0.2s * var(--i));
    }
    @keyframes pulse {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.5); opacity: 1; }
    }
    /* High-DPI adjustments */
    @media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
      .circle, .task-icon {
        transform: scale(1.5);
      }
      .circle:hover, .task-item:hover .task-icon {
        transform: scale(1.65);
      }
    }
  </style>
</head>
<body class="bg-gray-100 min-h-[100vh] flex items-center justify-center">
  <div id="app" class="w-[90vw] max-w-[600px] min-w-[300px] mx-auto p-[4vw] sm:p-[2vw] bg-white rounded-xl shadow-lg">
    <div id="loader" class="flex justify-center items-center h-[40vh] sm:h-[30vh]">
      <div class="flex space-x-[1vw]">
        <div class="w-[2vw] h-[2vw] min-w-[8px] min-h-[8px] bg-blue-500 rounded-full loader-dot" style="--i: 0;"></div>
        <div class="w-[2vw] h-[2vw] min-w-[8px] min-h-[8px] bg-blue-500 rounded-full loader-dot" style="--i: 1;"></div>
        <div class="w-[2vw] h-[2vw] min-w-[8px] min-h-[8px] bg-blue-500 rounded-full loader-dot" style="--i: 2;"></div>
      </div>
    </div>
    <div id="quiz" class="quiz-container hidden">
      <div class="question text-[1.2rem] sm:text-[1.5rem] font-semibold text-gray-800 mb-[2vh] text-center" id="question">
        <p>Loading...</p>
      </div>
      <div class="options flex flex-wrap justify-between gap-[1vw] mb-[2vh]" id="options"></div>
      <div class="labels flex justify-between text-[0.8rem] sm:text-[0.9rem] text-gray-600">
        <span>Never</span>
        <span>Rarely</span>
        <span>Sometimes</span>
        <span>Often</span>
        <span>Always</span>
      </div>
    </div>
    <div id="result-screen" class="hidden">
      <div class="quiz-result text-[1.5rem] sm:text-[2rem] font-bold text-center mb-[2vh]" id="score"></div>
      <div class="task-list space-y-[1vh]" id="tasks"></div>
      <button class="retake-btn mt-[2vh] w-full py-[1vh] bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-[1rem] sm:text-[1.1rem]">Retake Quiz</button>
    </div>
  </div>

  <script>
    const questions = [
      { q: "You find it hard to sit still for long periods.", scores: [0, 1, 2, 3, 4] },
      { q: "You get distracted easily during tasks.", scores: [0, 1, 2, 3, 4] },
      { q: "You have trouble organizing tasks or activities.", scores: [0, 1, 2, 3, 4] },
      { q: "You frequently forget things like appointments or obligations.", scores: [0, 1, 2, 3, 4] },
      { q: "You feel like your thoughts are racing and hard to control.", scores: [0, 1, 2, 3, 4] }
    ];
    const tasksBySeverity = {
      mild: [
        "Try a 5-minute mindfulness breathing exercise after each task.",
        "Use a Pomodoro timer: 25 minutes focus, 5 minutes break.",
        "Keep a notepad for quick jotting of to-dos."
      ],
      moderate: [
        "Designate a distraction-free workspace with minimal stimuli.",
        "Create a daily checklist each morning and tick off items.",
        "Use a focus-blocking app for 45-minute sessions."
      ],
      severe: [
        "Break tasks into 5-minute micro-tasks and reward yourself after each.",
        "Schedule structured cycles: 15 minutes work / 5 minutes move/stretch.",
        "Pair with an accountability buddy and check in hourly."
      ]
    };

    let current = 0, total = 0;
    const maxScore = questions.length * 4;

    window.onload = () => {
      setTimeout(() => {
        document.getElementById('loader').classList.add('hidden');
        document.getElementById('quiz').classList.remove('hidden');
        document.getElementById('quiz').classList.add('fade-in');
        loadQuestion();
      }, 1500);
    };

    function loadQuestion() {
      const q = questions[current];
      if (!q) {
        console.error('Question not found for index:', current);
        return;
      }
      const questionEl = document.getElementById('question');
      questionEl.innerHTML = `<p class="slide-in">${q.q}</p>`;
      const opts = document.getElementById('options');
      opts.innerHTML = '';
      ['Never', 'Rarely', 'Sometimes', 'Often', 'Always'].forEach((label, i) => {
        const c = document.createElement('div');
        c.className = `circle w-[10vw] h-[10vw] min-w-[40px] min-h-[40px] max-w-[60px] max-h-[60px] rounded-full ${['bg-red-400', 'bg-orange-400', 'bg-yellow-400', 'bg-green-400', 'bg-blue-400'][i]} flex items-center justify-center text-white font-semibold`;
        c.setAttribute('title', label);
        c.textContent = label.charAt(0);
        c.onclick = () => select(i);
        opts.appendChild(c);
      });
      setTimeout(() => {
        opts.querySelectorAll('.circle').forEach((el, i) => {
          el.style.animationDelay = `${i * 0.1}s`;
          el.classList.add('slide-in');
        });
      }, 10);
    }

    function select(idx) {
      total += questions[current].scores[idx];
      current++;
      if (current < questions.length) {
        loadQuestion();
      } else {
        showResult();
      }
    }

    function showResult() {
      document.getElementById('quiz').classList.add('hidden');
      const percent = Math.round((total / maxScore) * 100);
      const scoreEl = document.getElementById('score');
      scoreEl.textContent = `Focus Score: ${percent}%`;
      scoreEl.className = `quiz-result text-[1.5rem] sm:text-[2rem] font-bold text-center mb-[2vh] fade-in ${percent < 40 ? 'text-green-500' : percent <= 70 ? 'text-yellow-500' : 'text-red-500'}`;

      let severity = percent < 40 ? 'mild' : percent <= 70 ? 'moderate' : 'severe';
      const tasksEl = document.getElementById('tasks');
      tasksEl.innerHTML = '';
      tasksBySeverity[severity].forEach((txt, i) => {
        const div = document.createElement('div');
        div.className = 'task-item flex items-center space-x-[1vw] slide-in';
        div.style.animationDelay = `${i * 0.2}s`;
        div.innerHTML = `
          <svg class="task-icon w-[5vw] h-[5vw] min-w-[20px] min-h-[20px] max-w-[30px] max-h-[30px] text-${severity === 'mild' ? 'green' : severity === 'moderate' ? 'yellow' : 'red'}-500" viewBox="0 0 24 24">
            <circle cx="12" cy="12" r="10" fill="currentColor"/>
            <path d="M10 15l-3-3 1.5-1.5L10 12l5-5 1.5 1.5z" fill="white"/>
          </svg>
          <p class="text-gray-700 text-[0.9rem] sm:text-[1rem]">${txt}</p>`;
        tasksEl.appendChild(div);
      });
      document.getElementById('result-screen').classList.remove('hidden');
      document.getElementById('result-screen').classList.add('fade-in');
    }

    function resetQuiz() {
      current = total = 0;
      document.getElementById('result-screen').classList.add('hidden');
      document.getElementById('quiz').classList.remove('hidden');
      document.getElementById('quiz').classList.add('fade-in');
      loadQuestion();
    }
  </script>
</body>
</html>
